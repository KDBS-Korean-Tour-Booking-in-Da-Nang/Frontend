# 3.4 Article Module

## 3.4.1 View Approved Articles

**Function Trigger:** The function is triggered when a user navigates to the articles page or views the article list.

**Screen Layout**

Figure 41 Articles List Screen

**Function Description:** The function displays a list of articles that have been approved by admins/staff. Articles are crawled from external sources (DanangXanh) and translated into English and Korean. Only articles with status APPROVED are visible to regular users.

**Function Details:**

**Data:** The system displays:

- Article title (in user's language: Vietnamese, English, or Korean)
- Article description
- Article thumbnail image
- Article creation date
- Article link (to original source)
- Article status (only APPROVED articles are shown)

**Validation:**

- Articles must have status APPROVED to be visible
- Articles are displayed in user's selected language
- Articles can be filtered by status (for admins/staff)

**Business Rules:** BR-24

**Normal & Abnormal Cases:**

**Normal:**

- Approved articles are loaded successfully
- Articles are displayed in list format
- Articles show correct language based on user preference
- User can click article to view details
- Thumbnail images are displayed correctly

**Abnormal:**

- No approved articles found (empty state)
- Network error while loading articles
- Articles fail to load
- Thumbnail images fail to load
- Error message is displayed: "Failed to load articles"

---

## 3.4.2 View List Of Upcoming Articles

**Function Trigger:** The function is triggered when admins/staff navigate to the articles management page or view articles by status.

**Screen Layout**

Figure 42 Upcoming Articles Screen (Admin/Staff)

**Function Description:** The function displays articles that are pending approval or have been crawled but not yet approved. This view is only accessible to admins and staff for content moderation.

**Function Details:**

**Data:** The system displays:

- Article title (original Vietnamese)
- Article description
- Article thumbnail
- Article content
- Article status (PENDING, APPROVED, REJECTED)
- Article creation date
- Translated versions (English, Korean) if available

**Validation:**

- User must have ADMIN or STAFF role
- Articles with status PENDING are shown
- Articles can be filtered by status

**Business Rules:** BR-25

**Normal & Abnormal Cases:**

**Normal:**

- Upcoming articles are loaded successfully
- Articles are displayed with status information
- Admins/staff can see article details
- Articles can be approved or rejected
- A toast message is displayed: "Articles loaded successfully"

**Abnormal:**

- User not authorized (not admin/staff)
- No pending articles found
- Network error
- Articles fail to load
- Error message is displayed: "Failed to load articles" or "Access denied"

---

## 3.4.3 Crawl Article

**Function Trigger:** The function is triggered when an admin/staff manually triggers article crawling through the admin interface or through a scheduled job.

**Screen Layout**

Figure 43 Article Crawl Interface (Admin/Staff)

**Function Description:** The function crawls articles from DanangXanh website, extracts article content, translates it to English and Korean using Gemini AI, and stores them in the database with status PENDING for admin review.

**Function Details:**

**Data:** System processes:

- Article links from DanangXanh
- Article titles
- Article descriptions
- Article content (HTML)
- Article thumbnails
- Translated content (English and Korean)

**Validation:**

- Crawler checks for existing articles to avoid duplicates
- Only crawls new articles (stops when existing article found)
- Limits crawl to 2 articles per run (configurable)
- Article content must be valid HTML
- Translation must succeed for article to be saved

**Business Rules:** BR-82

**Normal & Abnormal Cases:**

**Normal:**

- Crawling starts successfully
- Articles are fetched from DanangXanh
- Duplicate articles are skipped
- New articles are extracted and translated
- Articles are saved with status PENDING
- A toast message is displayed: "Articles crawled successfully"
- Crawled articles appear in upcoming articles list

**Abnormal:**

- DanangXanh website is unavailable
- Network error during crawling
- HTML parsing fails
- Translation fails (Gemini API error)
- Article extraction fails
- Error message is displayed: "Failed to crawl articles"
- No articles are saved

---

## 3.4.4 Search Article

**Function Trigger:** The function is triggered when a user enters a search keyword in the article search bar or filters articles.

**Screen Layout**

Figure 44 Article Search Bar

**Function Description:** The function allows users to search for articles by keyword. Search can be performed on article titles, descriptions, and content across all languages (Vietnamese, English, Korean).

**Function Details:**

**Data:** Users can provide:

- Search keyword
- Optional filters (status, date range)

**Validation:**

- Search keyword can be empty (shows all articles)
- Search is performed across all language versions
- Only APPROVED articles are returned for regular users
- Admins/staff can search all statuses

**Business Rules:** BR-27

**Normal & Abnormal Cases:**

**Normal:**

- Search results are displayed
- Articles matching keyword are shown
- Results are relevant to search query
- User can click article to view details
- Search works across all languages

**Abnormal:**

- No articles match search criteria (empty state)
- Search fails
- Network error
- Error message is displayed: "Search failed"
- No results are shown

---

## 3.4.5 Reject Articles

**Function Trigger:** The function is triggered when an admin/staff clicks the "Reject" button on an article in the upcoming articles list.

**Screen Layout**

Figure 45 Reject Article Modal (Admin/Staff)

**Function Description:** The function allows admins/staff to reject articles that don't meet quality standards or violate content policies. Rejected articles are not visible to regular users.

**Function Details:**

**Data:** System processes:

- Article ID
- New status: REJECTED
- Admin/staff email (for authorization)

**Validation:**

- User must have ADMIN or STAFF role
- Staff must have task: APPROVE_TOUR_BOOKING_AND_APPROVE_ARTICLE
- Article must exist
- Article status must be PENDING

**Business Rules:** BR-84

**Normal & Abnormal Cases:**

**Normal:**

- Article status changed to REJECTED
- Article is removed from public view
- Article remains in database for audit
- A toast message is displayed: "Article rejected successfully"
- Article no longer appears in approved articles list

**Abnormal:**

- User not authorized
- Article not found
- Article already approved/rejected
- Network error
- A toast message is displayed: "Failed to reject article"
- Article status remains unchanged

---

## 3.4.6 Approve Articles

**Function Trigger:** The function is triggered when an admin/staff clicks the "Approve" button on an article in the upcoming articles list.

**Screen Layout**

Figure 46 Approve Article Button (Admin/Staff)

**Function Description:** The function allows admins/staff to approve articles for public viewing. Approved articles become visible to all users on the articles page.

**Function Details:**

**Data:** System processes:

- Article ID
- New status: APPROVED
- Admin/staff email (for authorization)

**Validation:**

- User must have ADMIN or STAFF role
- Staff must have task: APPROVE_TOUR_BOOKING_AND_APPROVE_ARTICLE
- Article must exist
- Article status must be PENDING
- Article must have valid content and translations

**Business Rules:** BR-29

**Normal & Abnormal Cases:**

**Normal:**

- Article status changed to APPROVED
- Article becomes visible to all users
- Article appears in approved articles list
- A toast message is displayed: "Article approved successfully"
- Article can be viewed by users

**Abnormal:**

- User not authorized
- Article not found
- Article already approved/rejected
- Article missing translations
- Network error
- A toast message is displayed: "Failed to approve article"
- Article status remains unchanged

---

## 3.4.7 Comment Article

**Function Trigger:** The function is triggered when a user views an article and wants to create a forum post discussing the article, or when a user clicks "Comment" on an article.

**Screen Layout**

Figure 47 Comment Article Interface

**Function Description:** The function allows users to create forum posts related to articles. Users can share their thoughts, ask questions, or discuss article content. This creates a forum post that references or discusses the article.

**Function Details:**

**Data:** Users can provide:

- Forum post title
- Forum post content (discussion about the article)
- Optional images
- Optional hashtags
- Reference to article (via link or mention)

**Validation:**

- User must be authenticated
- Post content must not be empty
- Article must exist (if referenced)
- Same validation as creating regular forum posts

**Business Rules:** BR-30

**Normal & Abnormal Cases:**

**Normal:**

- Forum post created successfully
- Post references or discusses the article
- Post appears in forum
- Other users can comment on the post
- A toast message is displayed: "Post created successfully"
- Discussion about article begins

**Abnormal:**

- User not authenticated
- Post content is empty
- Article not found (if referenced)
- Network error
- A toast message is displayed with appropriate error
- Post is not created
